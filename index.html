<!DOCTYPE html>
<html>
<head>
  <title>Saylani Portal Login</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f5f6fa; }
    .login-container { max-width: 400px; margin: 50px auto; }
    .radio-group { display: flex; justify-content: space-between; margin-top: 10px; }
    .radio-group label { font-weight: bold; }
  </style>
</head>
<body>

<div class="login-container card p-4 shadow-sm">
  <img src="assets/smit-logo.png" width="150" class="mb-3 mx-auto d-block">

  <input id="email" class="form-control mt-3" placeholder="Email">
  <input id="password" type="password" class="form-control mt-2" placeholder="Password">

  <div class="radio-group">
    <label><input type="radio" name="loginType" value="user" checked> User</label>
    <label><input type="radio" name="loginType" value="admin"> Admin</label>
  </div>

  <button id="signupBtn" class="btn btn-primary w-100 mt-3">Signup</button>
  <button id="loginBtn" class="btn btn-success w-100 mt-2">Login</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script src="js/firebase.js"></script> 
<script>
  const ADMIN_EMAIL = "eshaaladmin2007@gmail.com";
  const ADMIN_PASSWORD = "eshaal2007";

  function signupUser() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const loginType = document.querySelector('input[name="loginType"]:checked').value;

    if(!email || !password) return alert("Fill all fields!");

    if(loginType === "admin") {
      alert("Admins cannot signup. Use your admin credentials.");
      return;
    }

    firebase.auth().createUserWithEmailAndPassword(email, password)
      .then(() => alert("Signup successful! Please login."))
      .catch(err => alert(err.message));
  }

  function loginUser() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const loginType = document.querySelector('input[name="loginType"]:checked').value;

    if(!email || !password) return alert("Fill all fields!");

    if(loginType === "admin") {
      if(email === ADMIN_EMAIL && password === ADMIN_PASSWORD){
        alert("Admin login successful!");
        location.href = "admin.html"; 
      } else {
        alert("Invalid admin credentials!");
      }
    } else {
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(() => location.href = "dashboard.html")
        .catch(err => alert(err.message));
    }
  }

  window.signupUser = signupUser;
  window.loginUser = loginUser;

  document.getElementById("signupBtn").addEventListener("click", signupUser);
  document.getElementById("loginBtn").addEventListener("click", loginUser);
</script>

</body>
</html>