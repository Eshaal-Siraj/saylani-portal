<!DOCTYPE html>
<html>
<head>
  <title>Saylani Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { background: #f5f6fa; }
    .navbar-brand { color: #66b032 !important; font-weight: bold; }
    .nav-link.active { font-weight: bold; color: #0057a8 !important; }
    .card { box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .section { display: none; }
    .section.active { display: block; }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"> <img src="assets/smit-logo.png" width="150" class="mb-3 mx-auto d-block"></a>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link active" href="#" data-section="dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="lostFound">Lost & Found</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="complaints">Complaints</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="volunteers">Volunteers</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-section="admin" id="adminNav" style="display:none;">Admin</a></li>
      </ul>
      <button class="btn btn-danger" onclick="logout()">Logout</button>
    </div>
  </div>
</nav>

<div class="container">

  <!-- Dashboard -->
  <div id="dashboard" class="section active">
    <div class="row g-3 mb-4">
      <div class="col-md-3"><div class="card p-3 text-white bg-success"><h6>Total Lost Items</h6><h3 id="totalLost">0</h3></div></div>
      <div class="col-md-3"><div class="card p-3 text-white bg-primary"><h6>Complaints Submitted</h6><h3 id="totalComplaints">0</h3></div></div>
      <div class="col-md-3"><div class="card p-3 text-white bg-warning"><h6>Volunteers</h6><h3 id="totalVolunteers">0</h3></div></div>
      <div class="col-md-3"><div class="card p-3 text-white bg-info"><h6>Notifications</h6><h3 id="totalNotifications">0</h3></div></div>
    </div>
  </div>

  <!-- Lost & Found -->
  <div id="lostFound" class="section">
    <div class="card p-3 mb-3">
      <h4 class="text-success">Post Lost / Found Item</h4>
      <div class="d-flex gap-2 mb-2">
        <input id="title" class="form-control" placeholder="Title">
        <textarea id="desc" class="form-control" placeholder="Description"></textarea>
        <button id="postBtn" class="btn btn-success">Post</button>
        <button id="updateBtn" class="btn btn-success" style="display:none;">Update</button>
      </div>
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr><th>Title</th><th>Description</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody id="items"></tbody>
      </table>
    </div>
  </div>

  <!-- Complaints -->
  <div id="complaints" class="section">
    <div class="card p-3 mb-3">
      <h4 class="text-primary">Submit Complaint</h4>
      <div class="d-flex gap-2 mb-2">
        <select id="complaintCategory" class="form-control">
          <option>Internet</option>
          <option>Electricity</option>
          <option>Water</option>
        </select>
        <textarea id="complaintDesc" class="form-control" placeholder="Description"></textarea>
        <button id="submitComplaintBtn" class="btn btn-primary">Submit</button>
      </div>
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr><th>Category</th><th>Description</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody id="complaintsList"></tbody>
      </table>
    </div>
  </div>

  <!-- Volunteers -->
  <div id="volunteers" class="section">
    <div class="card p-3 mb-3">
      <h4 class="text-warning">Volunteer Registration</h4>
      <div class="d-flex gap-2 mb-2">
        <input id="volName" class="form-control" placeholder="Name">
        <input id="eventName" class="form-control" placeholder="Event Name">
        <select id="availability" class="form-control">
          <option value="">Select Availability</option>
          <option>Morning</option>
          <option>Afternoon</option>
          <option>Evening</option>
          <option>Full Day</option>
        </select>
        <button id="registerVolunteerBtn" class="btn btn-warning">Register</button>
      </div>
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr><th>Name</th><th>Event</th><th>Availability</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody id="volunteerList"></tbody>
      </table>
    </div>
  </div>

  <!-- Admin -->
  <div id="admin" class="section">
    <h4 class="text-danger">Admin Dashboard</h4>
    <div id="adminLostFound"></div>
    <div id="adminComplaints"></div>
    <div id="adminVolunteers"></div>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script src="js/firebase.js"></script>
<script src="js/app.js"></script>

<script>
  // Navbar section switching
  document.querySelectorAll('.nav-link').forEach(link=>{
    link.addEventListener('click', e=>{
      e.preventDefault();
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      const sec = document.getElementById(link.dataset.section);
      if(sec) sec.classList.add('active');
      document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
      link.classList.add('active');
    });
  });

  // Buttons binding
  document.getElementById("postBtn").addEventListener("click", postItem);
  document.getElementById("updateBtn").addEventListener("click", updateItem);
  document.getElementById("submitComplaintBtn").addEventListener("click", submitComplaint);
  document.getElementById("registerVolunteerBtn").addEventListener("click", registerVolunteer);
</script>

</body>
</html>